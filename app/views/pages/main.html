{% extends "layouts/base.html" %}

{% block content %}
{% raw %}
    <div ng-controller="main">
      <babbage-geoview country-code="MD" data="data"
        style="display: block; position: relative; width: 100%; height: 600px;"></babbage-geoview>
        <div ng-if="!isStarting">
            <available-packages></available-packages>
            <div ng-if="!isPackageLoading">
                <div class="row">
                    <measures measures="measures"></measures>
                    <dimensions dimensions="dimensions"></dimensions>
                </div>
                <div class="col-md-12 col-xs-12">
                    <h2>
                        <span>Views</span>
                        <div class="pull-right btn-group">
                            <button class="fa fa-arrow-left btn btn-default" disabled="" type="button"></button>
                            <button class="fa fa-arrow-right btn btn-default" disabled="" type="button"></button>
                        </div>
                    </h2>
                </div>

                <div class="col-md-12 col-xs-12 charts">
                    <uib-tabset>
                        <uib-tab heading="Treemap" ng-click="setTab('Treemap')">
                            <babbage ng-if="!flag.renderingCharts && currentTab == 'Treemap'"
                                     endpoint="http://s145.okserver.org/api/3/"
                                     cube="{{availablePackages.current}}"
                                     state="babbageTreeMap">
                                <babbage-treemap></babbage-treemap>
                            </babbage>
                        </uib-tab>
                        <uib-tab heading="Pie Chart" ng-click="setTab('PieChart')">
                            <babbage ng-if="!flag.renderingCharts && currentTab == 'PieChart'"
                                     endpoint="http://s145.okserver.org/api/3/"
                                     cube="{{availablePackages.current}}"
                                     state="babbageBar">
                                <pie-chart></pie-chart>
                            </babbage>
                        </uib-tab>
                        <uib-tab heading="Bar Chart" ng-click="setTab('BarChart')">
                            <babbage ng-if="!flag.renderingCharts && currentTab == 'BarChart'"
                                     endpoint="http://s145.okserver.org/api/3/"
                                     cube="{{availablePackages.current}}"
                                     state="babbageBar">
                                <babbage-chart chart-type="bar"></babbage-chart>
                            </babbage>
                        </uib-tab>
                        <uib-tab heading="Bubble Tree" ng-click="setTab('BubbleTree')">
                            <babbage ng-if="!flag.renderingCharts && currentTab == 'BubbleTree'"
                                     endpoint="http://s145.okserver.org/api/3/"
                                     cube="{{availablePackages.current}}"
                                     state="babbageBar">
                                <bubble-tree></bubble-tree>
                            </babbage>
                        </uib-tab>
                        <uib-tab heading="Table" ng-click="setTab('Table')">
                            <babbage ng-if="!flag.renderingCharts && currentTab == 'Table'"
                                     endpoint="http://s145.okserver.org/api/3/"
                                     cube="{{availablePackages.current}}"
                                     state="babbageTable">
                                <babbage-crosstab></babbage-crosstab>
                            </babbage>
                        </uib-tab>
                    </uib-tabset>
                </div>
            </div>
        </div>
        <div class="waiter text-center" ng-if="(isPackageLoading || isStarting)">
            <i class="fa fa-spinner fa-pulse fa-4x"></i>
            <span>Loading...</span>
        </div>
    </div>
{% endraw %}
{% endblock %}
